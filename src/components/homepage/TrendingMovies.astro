---
import MovieCard from "./MovieCard.astro";
const key = import.meta.env.ApiKeyAuth;
const url = import.meta.env.ApiUrl;

const homepagetrending = await fetch(
  `${url}trending/all/week?sort_by=popularity.desc&api_key=${key}&page=1`
).then((res) => res.json());

console.log(homepagetrending);
---

<div class="">
  <h2 class="text-2xl md:text-3xl justify-center text-center font-bold">
    Trending Now
  </h2>
  <div>
    <div class="py-6 sm:py-8 lg:py-12">
      <div class="mx-auto max-w-screen-2xl px-5 md:px-20">
        <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
          {
            homepagetrending.results.map((movie) => (
              <MovieCard
              id={movie.id}
                title={movie.title || movie.name}
                image={`https://image.tmdb.org/t/p/original/${movie.poster_path}`}
                language={movie.original_language}
                year={movie.release_date || movie.first_air_date}
                type={movie.media_type}
                rating={movie.vote_average}
              />
            ))
          }
        </div>
      </div>
    </div>
  </div>
</div>
